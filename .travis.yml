language: node_js
node_js:
  - "node"
cache:
  directories:
    - "node_modules"
install:
  - npm i -g npm@5.7.1
  - npm ci
stages:
  - name: lint
    if: type = pull_request
  - name: test
    if: type = pull_request
  - name: build
    if: type = pull_request
jobs:
  include:
    - stage: test
      script: npm test
    - stage: lint
      script: ./node_modules/.bin/eslint src/
    - stage: build
      script: npm run build
